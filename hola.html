<!DOCTYPE html>
<html>
<body>

<canvas id="canvas" width="500" height="500" style="border:1px solid #d3d3d3;">
Tu navegador no soporta el elemento canvas de HTML5.
</canvas>

<button id="borrar">Borrar</button>
<button id="reconocer">Reconocer texto</button>

<script src='https://cdn.rawgit.com/naptha/tesseract.js/1.0.10/dist/tesseract.js'></script>

<script>
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var pintar = false;
var x = 0;
var y = 0;

canvas.addEventListener('mousedown', function(e) {
    x = e.offsetX;
    y = e.offsetY;
    pintar = true;
});

canvas.addEventListener('mousemove', function(e) {
    if (pintar) {
        dibujar(x, y, e.offsetX, e.offsetY);
        x = e.offsetX;
        y = e.offsetY;
    }
});

canvas.addEventListener('mouseup', function(e) {
    if (pintar) {
        dibujar(x, y, e.offsetX, e.offsetY);
        x=0;
        y=0;
        pintar = false;
    }
});

function dibujar(x1, y1, x2, y2) {
    ctx.beginPath();
    ctx.strokeStyle = 'black';
    ctx.lineWidth = 2;
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    ctx.closePath();
}

document.getElementById('borrar').addEventListener('click', function() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
});

document.getElementById('reconocer').addEventListener('click', function() {
    var dataURL = canvas.toDataURL();
    Tesseract.recognize(
      dataURL,
      'eng',
      { logger: m => console.log(m) }
    ).then(({ data: { text } }) => {
      console.log(text);
    })
});
</script>

</body>
</html>
